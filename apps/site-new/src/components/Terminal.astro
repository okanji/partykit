---
import "../styles/variables.css";
import Button from "./atoms/Button.astro";
---

<div id="terminal">
  <div id="terminal-tabs">
    <span>New project</span>
    <span>Add to existing project</span>
    <Button variant="github" url="#">Fork on GitHub</Button>
  </div>

  <figure>
    <span>npm install partykit</span>
    <figcaption>Install with npm</figcaption>
  </figure>

  <figure is:raw>
    <span>export default class Server {<br> onMessage(message, websocket) {<br>
    websocket.send("pong");<br> }<br> onRequest(request) {<br> return new
    Response(`This is room ${party.id}`);<br> }<br> }</span> <figcaption>Write
    your code</figcaption>
  </figure>

  <figure>
    <span>npx partykit dev server.js</span>
    <figcaption>Develop on localhost</figcaption>
  </figure>

  <figure>
    <span>npx partykit deploy server.js --name first-party</span>
    <figcaption>Deploy to the edge</figcaption>
  </figure>

  <figure is:raw>
    <span>curl https://first-party.{yourname}.partykit.dev/party/my-room</span>
    <figcaption>Try it out</figcaption>
  </figure>
</div>

<style>
  #terminal {
    grid-column: 1 / 3;
    position: relative;
    display: flex;
    flex-direction: column;
    gap: 2rem;
    margin: 0 -1rem 2rem -3rem;
    padding: calc(40px + 4rem) 2rem 4rem 4rem;
    overflow: hidden;
    border-radius: 0 var(--box-radius) var(--box-radius) 0;
    background: rgba(20, 20, 20, 1);
    color: white;
    font-variation-settings: "wght" 300;
    box-shadow: 0 30px 40px rgba(0, 0, 0, 0.5);
    counter-set: figcaption;
    counter-reset: figcaption;
  }

  @media (min-width: 760px) {
    #terminal {
      grid-column: 1 / 7;
      grid-row: 2 / 3;
      margin-right: 0;
      padding-bottom: 0;
      margin-bottom: 0;
    }
  }

  #terminal:before {
    content: " ";
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 40px;
    background: rgba(255, 255, 255, 0.1);
    border-bottom: 0.5px solid rgba(255, 255, 255, 0.3);
  }

  #terminal #terminal-tabs {
    font-size: 80%;
    position: absolute;
    top: 0;
    left: 2rem;
    right: 0;
    height: 40px;
    padding-right: 0.5em;
    overflow: hidden;
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: start;
    flex-wrap: wrap;
  }

  #terminal #terminal-tabs span {
    line-height: 38px;
    padding: 2px 2rem 0;
    cursor: pointer;
  }

  #terminal #terminal-tabs span + span {
    border-left: 0.5px solid rgba(255, 255, 255, 0.3);
    color: rgba(255, 255, 255, 0.5);
  }

  #terminal #terminal-tabs span + span:hover {
    color: inherit;
  }

  #terminal #terminal-tabs .button {
    color: var(--color-feature-2);
  }

  #terminal figure {
    font-family: monospace;
    line-height: 1.5;
    font-size: 90%;
    display: flex;
    flex-direction: column-reverse;
    align-items: stretch;
  }

  #terminal figcaption {
    counter-increment: figcaption;
    opacity: 0.5;
  }

  #terminal figcaption:before {
    content: "// " counter(figcaption) ". ";
  }
</style>
